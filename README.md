# Test<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>محاكي اختبار الرخصة المهنية — إعداد : فهد الخالدي</title>

<!-- خط جميل -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Almarai:wght@300;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#f4f7fb;
  --card:#ffffff;
  --primary:#1e64d0;
  --accent:#06b6d4;
  --success:#16a34a;
  --danger:#ef4444;
  --muted:#6b7280;
  --glass: rgba(255,255,255,0.7);
  --radius:14px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background: linear-gradient(180deg,#eef6ff 0%, #f9fbff 100%);
  font-family: "Almarai", "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Noto Kufi Arabic";
  color:#0b1220;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  direction:rtl;
  padding:18px;
}

/* Container */
.app{
  max-width:1150px;
  margin:0 auto;
}

/* Header */
.header{
  background:var(--card);
  border-radius:var(--radius);
  padding:18px 20px;
  box-shadow:0 12px 40px rgba(12,22,48,0.07);
  display:flex;
  gap:12px;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
}
.title {
  font-size:1.35rem;
  font-weight:800;
  color:var(--primary);
}
.subtitle{ color:var(--muted); font-weight:600; font-size:0.95rem; }

/* Controls */
.controls{
  margin-top:14px;
  display:flex;
  gap:12px;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
}
.left-controls, .right-controls { display:flex; gap:10px; align-items:center; }
.btn{
  background:var(--primary);
  color:#fff;
  padding:10px 14px;
  border-radius:12px;
  border:0;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 8px 26px rgba(30,100,208,0.12);
}
.btn.secondary{
  background:#fff;
  color:var(--primary);
  border:1px solid rgba(30,100,208,0.12);
  box-shadow:none;
}
.counter{
  font-weight:800; color:var(--muted);
}

/* layout */
.main{
  display:grid;
  grid-template-columns: 1fr 360px;
  gap:18px;
  margin-top:18px;
}
@media (max-width:980px){
  .main{ grid-template-columns: 1fr; }
}

/* Quiz column */
.quiz{
  display:flex;
  flex-direction:column;
  gap:14px;
}

/* Card */
.card{
  background:var(--card);
  border-radius:12px;
  padding:14px 16px;
  box-shadow:0 10px 30px rgba(12,22,48,0.06);
  transition:transform .22s, box-shadow .22s;
  overflow:visible;
}
.card:hover{ transform:translateY(-4px); }
.q-head{ display:flex; align-items:center; justify-content:space-between; gap:10px }
.q-num{ background:linear-gradient(135deg,var(--accent),var(--primary)); color:#fff; padding:6px 12px; border-radius:10px; font-weight:800; }
.sentence{ margin:12px 0 14px; font-size:1.06rem; color:#0b1220; line-height:1.6 }

/* choices */
.choices{ display:flex; flex-wrap:wrap; gap:10px; }
.choice{
  flex:1 1 48%;
  background:linear-gradient(180deg,#fbfdff,#f6fbff);
  border-radius:10px;
  padding:12px 14px;
  border:1px solid rgba(15,23,42,0.06);
  font-weight:700;
  cursor:pointer;
  transition: transform .16s, box-shadow .16s;
  user-select:none;
  text-align:right;
  min-width:140px;
}
.choice:hover{ transform:translateY(-6px); box-shadow:0 14px 40px rgba(2,6,23,0.06); }
.choice.disabled{ opacity:.88; cursor:default; transform:none; box-shadow:none; pointer-events:none; }
.choice.correct{ background:linear-gradient(90deg,#bbf7d0,#16a34a); color:#04200a; box-shadow:0 10px 30px rgba(16,185,129,0.12); }
.choice.wrong{ background:linear-gradient(90deg,#ffd6db,#ef4444); color:#3b0a0a; box-shadow:0 10px 30px rgba(239,68,68,0.12); }

/* pop explanation inside card */
.pop{
  margin-top:12px;
  padding:12px;
  border-radius:10px;
  background:linear-gradient(180deg,#ffffff,#fbfdff);
  border:1px solid #e6eef8;
  box-shadow:0 10px 30px rgba(2,6,23,0.04);
  animation:pop .28s ease forwards;
}
.pop strong{ display:block; margin-bottom:6px; font-weight:800; }
@keyframes pop{ from{ opacity:0; transform:translateY(-8px) } to{ opacity:1; transform:none } }

/* side panel */
.side{
  position:relative;
  background:var(--card);
  border-radius:12px;
  padding:16px;
  box-shadow:0 10px 30px rgba(12,22,48,0.06);
  height:max-content;
}
.progress{
  height:12px;
  background:linear-gradient(90deg,#eef6ff,#f0fbff);
  border-radius:999px;
  overflow:hidden;
  margin-bottom:12px;
}
.progress > i{
  display:block;
  height:100%;
  background:linear-gradient(90deg,var(--accent),var(--primary));
  width:0%;
  transition:width .36s ease;
}
.stats{ display:flex; gap:8px; flex-direction:column; margin-top:8px; color:var(--muted); font-weight:700; }
.stat-row{ display:flex; justify-content:space-between; align-items:center; font-size:0.95rem; }

/* overlay final */
.overlay{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(2,6,23,0.46);
  z-index:9999;
}
.panel{
  background:#fff;
  padding:20px;
  border-radius:14px;
  max-width:520px;
  width:92%;
  text-align:center;
  box-shadow:0 20px 50px rgba(2,6,23,0.3);
}
.panel h2{ margin:6px 0 10px; color:var(--primary) }
.panel .score{ font-size:2.4rem; font-weight:900; color:var(--success) }
.panel .break{ margin-top:10px; color:var(--muted) }

/* footer */
.footer{ margin-top:22px; text-align:center; color:var(--muted); font-size:0.95rem; }

/* small */
.small{ font-size:0.92rem; color:var(--muted); }

/* responsive choices on small screens */
@media (max-width:600px){
  .choice{ flex:1 1 100%; }
}
</style>
</head>
<body>
<div class="app">
  <div class="header">
    <div>
      <div class="title">محاكي اختبار الرخصة المهنية</div>
      <div class="subtitle">إعداد : فهد الخالدي</div>
    </div>
    <div class="small">المستوى: صعب جدًا جدًا — تصميم محاكاة يشبه اختبار الرخصة العامة</div>
  </div>

  <div class="controls">
    <div class="left-controls">
      <button id="showAll" class="btn">عرض النتيجة</button>
      <button id="resetBtn" class="btn secondary">إعادة الاختبار</button>
    </div>
    <div class="right-controls">
      <div class="counter">إجابات صحيحة: <span id="summaryCount">0</span> / 68</div>
    </div>
  </div>

  <div class="main">
    <div class="quiz" id="quizColumn">
      <!-- البطاقات ستُنشأ ديناميكيًا -->
    </div>

    <aside class="side">
      <div class="small">شريط التقدم</div>
      <div class="progress"><i id="progressBar"></i></div>
      <div class="stats">
        <div class="stat-row"><span>الإجابات الصحيحة</span><strong id="statCorrect">0</strong></div>
        <div class="stat-row"><span>الأسئلة المبحوثة</span><strong id="statAnswered">0 / 68</strong></div>
        <div class="stat-row"><span>النسبة المئوية</span><strong id="statPercent">0%</strong></div>
      </div>
      <div style="height:14px"></div>
      <div class="small">تعليمات: اضغط على خيار للإجابة. ستظهر نافذة نتائج قصيرة داخل كل سؤال تبيّن سبب الإجابة. لا تُمنح نقاط على الخيارات الخاطئة.</div>
    </aside>
  </div>

  <div class="footer">موفق — إذا رغبت بالنسخة المطبوعة أو تعديل مستوى الصعوبة أخبرني.</div>
</div>

<!-- Overlay النتائج -->
<div id="overlay" class="overlay">
  <div class="panel">
    <h2>النتيجة النهائية</h2>
    <div class="score" id="finalScore">0 / 68</div>
    <div class="break" id="finalBreak">لم تقم بالإجابة بعد.</div>
    <button id="closeOverlay" class="btn secondary">حسناً</button>
  </div>
</div>

<script>
/* ===========================
   QUESTIONS (68) — صعبة جدًا جدًا
   موزعة على مجالات: مواقف تربوية، تقويم، لغة عربية، رياضيات، إدارة صف، تخطيط، تكنولوجيا، صعوبات تعلم...
   كل سؤال: q, choices(4), correct (0..3), explanation
   الإجابات موزعة وغير منتظمة.
   =========================== */

const questions = [
/* 1 */ { q: "موقف تربوي: أثناء نشاط مجموعة، يهيمن طالب ذو طابع قيادي على كل القرارات ويقمع آراء الآخرين. ما الإجراء التربوي الأكثر دقة لمعالجة هذا الموقف؟",
choices: [
  "تعيين أدوار واضحة وتدويرها دوريًا بين الأعضاء",
  "استبعاد الطالب من المجموعة لحدوث توازن",
  "إعطاءه مكافآت لتشجيعه على القيادة",
  "تجاهل السلوك لأن له نتائج إيجابية"
],
correct: 0,
explanation: "تعيين أدوار وتدويرها يقلل الاحتكار ويعطي فرصًا متساوية للمشاركة."
},

/* 2 */ { q: "تقويم: وجدت تحليل بنود الاختبار أن بنداً معيناً أثبت نسب خطأ عالية بشكل متكرر. ما التفسير الأكثر احتمالا؟",
choices: [
  "البند قد يكون مُصاغًا بشكل مُضلّل أو غامض",
  "المستوى العام للطلاب منخفض جدا",
  "الاختبار طويل جدا",
  "الطلاب لم يدرسوا المادة"
],
correct: 0,
explanation: "البند المربك يؤدي إلى نسبة أخطاء مرتفعة حتى عند كفاية الطلاب."
},

/* 3 */ { q: "لغة عربية: عند قياس فهم النص الأدبي، أي نوع سؤال يكشف عن مهارات التحليل الأكثر أمناً؟",
choices: [
  "أسئلة تفسير الدوافع والدلالات الأدبية",
  "أسئلة معجمية عن مرادفات الكلمات",
  "أسئلة عن مَعرِفة سياق الجمل فقط",
  "أسئلة حفظية عن أسماء الشخصيات"
],
correct: 0,
explanation: "تحليل الدوافع والدلالات يكشف فهمًا عميقًا للنص."
},

/* 4 */ { q: "موقف تربوي: طالب يعاني انخفاضا ملحوظا في الدافعية بعد مرور فترة نجاح سابقة. ما السبب التربوي الأرجح؟",
choices: [
  "تغير في ظروف أو توقعات المدرسة/الأسرة أثر على دافعيته",
  "انخفاض مستوى ذكائه فجأة",
  "المعلم لم يلاحظ التغيير",
  "زيادة عدد الواجبات فقط"
],
correct: 0,
explanation: "التغيرات البيئية أو طلبات أعلى قد تضعف الدافعية رغم الإمكانات السابقة."
},

/* 5 */ { q: "رياضيات: في مسألة لفظية معقدة، الطلاب يطبقون صيغة خاطئة متكررة. ما الإجراء التدريسي الأكثر فاعلية؟",
choices: [
  "تحليل الخطأ المشترك مع الطلاب وربطه بمعنى الصيغة",
  "زيادة عدد المسائل للحل فقط",
  "تقديم الصيغة جاهزة دون تفسير",
  "تقييم الطلاب بعلامات أقل"
],
correct: 0,
explanation: "فهم مصدر الخطأ ومعناه يساعد على تصحيح الفهم ليس مجرد الممارسة."
},

/* 6 */ { q: "تخطيط: عند كتابة أهداف درس معرفية، أي صياغة تعتبر الأكثر ملاءمة لقياس مستوى أعلى وفق بلوم؟",
choices: [
  "صياغة هدف يتضمن 'يحلل' أو 'يقيّم' بدل 'يتذكر'",
  "صياغة هدف يتضمن 'يعيد' المحتوى",
  "صياغة هدف عام دون فعل قابل للقياس",
  "صياغة هدف طولي بدون نتيجة واضحة"
],
correct: 0,
explanation: "أفعال مثل 'يحلل' و'يقيّم' تقيس مستويات عليا من التفكير."
},

/* 7 */ { q: "إدارة صف: طالب يستمر بالمقاطعة المتعمدة أثناء الشرح. أي استراتيجية صفية قصيرة المدى أنجعها؟",
choices: [
  "تطبيق نظام إشارات غير لفظي لتصحيح السلوك مع توقعات واضحة",
  "اللوم أمام الصف لتثبيط السلوك",
  "زيادة الواجبات العقابية",
  "تجاهل السلوك تماما"
],
correct: 0,
explanation: "إشارات غير لفظية وحوارات واضحة تؤدي لالتزام دون إحراج."
},

/* 8 */ { q: "تكنولوجيا تعليم: المعلم يود تعزيز التفاعل الإلكتروني، لكنه يلاحظ قلة مشاركة. ما التحسين الأكثر فعالية؟",
choices: [
  "تصميم أنشطة قصيرة تقيّم المشاركة وتمنح تغذية راجعة فورية",
  "إرسال مرجع طويل للقراءة قبل الدرس",
  "تقليل محتوى المنصة إلى مواد قارئة فقط",
  "فرض الحضور الإلكتروني دون أنشطة"
],
correct: 0,
explanation: "الأنشطة القصيرة مع تغذية راجعة فورية ترفع التفاعل الإلكتروني."
},

/* 9 */ { q: "تقويم: عند مقارنة اختبارين متتاليين لنفس الفئة ووجدت اختلافًا كبيرًا في المتوسط لصالح الاختبار الثاني، الاحتمال الأكثر مهنية؟",
choices: [
  "التدخل التعليمي أثر بوضوح وتحسّن أداء الطلاب",
  "خطأ في احتساب الدرجات في الاختبار الأول",
  "استخدام طريقة تصحيح مختلفة في الاختبار الثاني",
  "كل ما سبق لا يمكن استبعاده حتى الفحص"
],
correct: 3,
explanation: "حالة كهذه تتطلب فحصًا لأسباب متعددة؛ لا يجب الافتراض من سبب واحد."
},

/* 10 */ { q: "لغة عربية: طالب يكتب مقالا جيدا في المحتوى لكن أسلوبه غير منطقي من ناحية الانتقال بين الفقرات. ما نصيحة المنهجية الأنسب؟",
choices: [
  "تعليمه استخدام خرائط مفاهيم قبل كتابة المسودة",
  "زيادة سرعة الكتابة لتقليل التفكير",
  "حذف فقرة كاملة كعلاج",
  "تركيزه على الإملاء فقط"
],
correct: 0,
explanation: "خرائط المفاهيم تساعد الطلاب على تنظيم الأفكار قبل الصياغة."
},

/* 11 */ { q: "موقف تربوي: طالب يجيب إجابات صحيحة بسرعة لكن يخطئ في الأسئلة المعمقة. ما الدليل الأكثر احتمالا؟",
choices: [
  "الاعتماد على استراتيجية حل سريعة دون عمق معرفي",
  "ضعف في الرؤية",
  "مشكلة في اللغة فقط",
  "المعلم يعطي هامش خطأ كبير"
],
correct: 0,
explanation: "سرعة الإجابة قد تدل على حفظ سطحي وليس معالجة عميقة."
},

/* 12 */ { q: "صعوبات تعلم: طالب يخلط بين الحروف المتشابهة ويقرأ ببطء، ما الإجراء التشخيصي الأول؟",
choices: [
  "إحالة لتقييم صعوبات تعلم متخصص لتحديد نوع المشكلة",
  "زيادة الواجبات الكتابية فقط",
  "تجاهل الأمر لأنه مؤقت",
  "تغيير المدرس مباشرة"
],
correct: 0,
explanation: "التقييم المتخصص يحدد وجود عسر القراءة أو عوامل أخرى لتدخل مناسب."
},

/* 13 */ { q: "رياضيات: طالب قادر على حل أمثلة مماثلة لكن يفشل في مسألة بمعلومات معطاة مختلفة. ما مهارة التفكير المطلوب تقويتها؟",
choices: [
  "مهارة التعميم ونقل الحلول إلى سياقات جديدة",
  "مهارة الحفظ الآلي للصيغ",
  "مهارة الرسم فقط",
  "مهارة السرعة في الحساب"
],
correct: 0,
explanation: "التعميم يسمح بتطبيق الاستراتيجيات على مواقف متنوعة."
},

/* 14 */ { q: "تخطيط: عند تصميم درس متباين (Differentiated Instruction)، ما العنصر الذي يجب تضمينه أساسياً؟",
choices: [
  "مسارات تعلم بديلة بناءً على مستويات الطلاب واهتماماتهم",
  "تطبيق نفس النشاط على الجميع مع درجات متفاوتة",
  "تقليل المواد للطلاب الضعيفين فقط",
  "زيادة طول الحصة للجميع"
],
correct: 0,
explanation: "التمايز يتطلب تصميم مسارات وأنشطة متنوعة لتلبية الاحتياجات."
},

/* 15 */ { q: "لغة عربية: ما السؤال الأنسب لقياس القدرة على 'الاستدلال' لدى الطالب من نص؟",
choices: [
  "لماذا يظن الكاتب أن... وما الدليل؟",
  "ما تعريف الكلمة؟",
  "كم عدد الفقرات؟",
  "هل النص مفيد؟"
],
correct: 0,
explanation: "سؤال استدلالي يطلب تفسيرًا وربطًا بين نص ودليل."
},

/* 16 */ { q: "موقف تربوي: أثناء اختبار شفهي، طالب يتردد ويظهر توترا شديدا. ما الإجراء الحساس لتقليل التوتر؟",
choices: [
  "إعطاء وقت انتظار قصير وتشجيع بلطف وإعادة صياغة السؤال",
  "وضعه أمام الفصل بشكل علني كمثال",
  "مقاطعته وإعطاء درجة قليلة",
  "إكمال الامتحان نيابة عنه"
],
correct: 0,
explanation: "الانتظار والتشجيع وتقليل الضغوط يساعد على الأداء بدون إحراج."
},

/* 17 */ { q: "تقويم: أي نوع من الصدق يقيس مدى توافق نتائج الاختبار مع مقياس خارجي في نفس الزمن؟",
choices: [
  "الصدق التلازمي (concurrent validity)",
  "صدق المحتوى",
  "صدق البناء",
  "الصدق التنبؤي"
],
correct: 0,
explanation: "الصدق التلازمي يقارن اختبارات تقيس نفس المتغير في نفس الزمن."
},

/* 18 */ { q: "تكنولوجيا: عند استخدام منصة تعليمية، ما المعيار الذي يرفع فعالية التغذية الراجعة؟",
choices: [
  "الاستجابة الفورية المفصلة وربطها بخطوات لتحسين الأداء",
  "تأخير التعليقات لوقت أطول",
  "التعليقات العامة دون شرح",
  "اعتماد التعليقات فقط على الدرجة"
],
correct: 0,
explanation: "تغذية راجعة فورية ومحددة تعزز التعلم والتحسين."
},

/* 19 */ { q: "رياضيات: ما أفضل طريقة لتقييم التفكير التركيبي (synthesis) لدى الطلاب في موضوع الجبر؟",
choices: [
  "مهمة تصميم مسألة جديدة تربط أكثر من مفهوم جبري",
  "اختبار اختيار من متعدد سريع",
  "إعطاء مسألة منقولة من الكتاب فقط",
  "حفظ طرق الحل"
],
correct: 0,
explanation: "تصميم مسألة جديدة يتطلب دمج مفاهيم مختلفة وإبداع."
},

/* 20 */ { q: "لغة عربية: طالب يستخدم ألفاظًا مناسبة لكن تركيب الجملة غير سليم. أي مهارة نحسنها؟",
choices: [
  "التدريب على تراكيب نحوية وجمل انتقالية بين الفقرات",
  "زيادة تكرار القراءة فقط",
  "التركيز على المحادثة فقط",
  "الاكتفاء بالأسلوب الشخصي"
],
correct: 0,
explanation: "تدريب نحوي ومنهجي يساعد التراكيب والانتقالات بين الفقرات."
},

/* 21 */ { q: "موقف تربوي: صف متعدد المستويات؛ بعض الطلاب يشعرون بالملل والبعض بالإرهاق. ما استراتيجية إدارة المحتوى؟",
choices: [
  "التعلم المتمايز بتوفير مهام تمديد وتسهيل حسب مستوى الطالب",
  "تقليل وقت الحصة للجميع",
  "نقل الطلاب إلى صفوف متجانسة فقط",
  "إلغاء الأنشطة الجماعية"
],
correct: 0,
explanation: "التمايز يؤدي لتحدي المتفوق ودعم الضعيف بنفس الوقت."
},

/* 22 */ { q: "تقويم: أي مؤشر يبين أن الاختبار لديه ثبات جيد؟",
choices: [
  "اتساق النتائج عند إعادة التطبيق لنفس العينة أو عبر أجزاء الاختبار",
  "ارتفاع المتوسط فقط",
  "سهولة البنود",
  "تنوع الأسئلة الكبير"
],
correct: 0,
explanation: "الثبات يعكس استقرار أو تناسق النتائج عبر مرات أو أجزاء الاختبار."
},

/* 23 */ { q: "صعوبات تعلم: طالب يواجه صعوبة في حل المشكلات بسبب ضعف التخطيط المسبق. ما الدعم المناسب؟",
choices: [
  "تعليم استراتيجيات التخطيط خطوة بخطوة واستخدام قوائم تحقق",
  "زيادة الواجبات دون إرشاد",
  "تعويم الطالب بمفرده",
  "اعتماده على زميله دائمًا"
],
correct: 0,
explanation: "قوائم التحقق وخطوات التخطيط تعزز عملية حل المشكلات."
},

/* 24 */ { q: "رياضيات: عند تصميم سؤال يقيس مهارة 'التفكير النقدي' في الهندسة، ما الصيغة الأنسب؟",
choices: [
  "اطلب من الطالب تقييم صحة استنتاج هندسي مقترح وتقديم برهانه",
  "اطلب فقط حساب محيط الشكل",
  "أسئلة حفظية عن النظريات",
  "سؤال حسابي بسيط"
],
correct: 0,
explanation: "التقييم والبرهان يتطلبان تفكيرًا نقديًا وتحليلاً."
},

/* 25 */ { q: "لغة عربية: في تقويم الكتابة الإبداعية، ما الذي يعزز صدق التقدير؟",
choices: [
  "وجود معايير (rubric) واضحة ومشتركة بين المصححين",
  "كل مصحح يعطي حُكم خاص به دون معايير",
  "التركيز على الطول فقط",
  "التصحيح العشوائي"
],
correct: 0,
explanation: "معايير واضحة تقلل التحيز وتزيد ثبات وصدق التقدير."
},

/* 26 */ { q: "موقف تربوي: طالب يتجنب السؤال خوفًا من السخرية. ما التعديل الصفّي طويل المدى لرفع ثقته؟",
choices: [
  "بناء ثقافة صفية آمنة عبر قواعد واضحة وممارسات تشجيع منتظمة",
  "فرض عقاب على من يسخر",
  "تجاهل الشكليات والتركيز على المادة فقط",
  "إجبار الطالب على الكلام أمام الجميع"
],
correct: 0,
explanation: "ثقافة آمنة مع تشجيع مستمر تقلل الخوف وتعزز المشاركة."
},

/* 27 */ { q: "تقويم: ما معنى 'المعايرة' (calibration) عند إعداد بنوك الأسئلة؟",
choices: [
  "تحديد خصائص البنود مثل الصعوبة والتمييز بناءً على تجارب سابقة",
  "تجميل صياغة الأسئلة فقط",
  "إخفاء مفردات صعبة عن الطلاب",
  "اختصار الاختبار"
],
correct: 0,
explanation: "المعايرة تعني فحص خصائص البنود لتحديد ملاءمتها."
},

/* 28 */ { q: "تكنولوجيا: أي استخدام للتقنية يعزز التفكير التوليدي لدى الطلاب؟",
choices: [
  "منصات تسمح بالعصف الذهني ومشاركة البدائل وتوسيع الحلول",
  "مواقع للتحميل فقط",
  "عرض شرائح ثابتة بدون تفاعل",
  "قنوات إعلامية مسموعة فقط"
],
correct: 0,
explanation: "أدوات التبادل والتوسع تعزز التفكير التوليدي والإبداع."
},

/* 29 */ { q: "موقف تربوي: دورتك التدريبية تتضمن تقييمًا متعدد المصادر. ما سبب ميزته؟",
choices: [
  "يعطي صورة أكثر شمولًا عن أداء المعلم عبر ملاحظات وزملاء وطلاب ونتائج",
  "يبسط عملية التقييم بشكل مفرط",
  "يقلل من مصداقية التقييم",
  "يجعل التقييم بطيئًا فقط"
],
correct: 0,
explanation: "التقويم متعدد المصادر يزيد الشمولية ويقلل التحيز."
},

/* 30 */ { q: "لغة عربية: عند قياس ملاءمة التعبير، أي عنصر يجب أن يكون في معيار التقدير؟",
choices: [
  "وضوح الأفكار وترابط الفقرات",
  "طول النص فقط",
  "وجود كلمات صعبة فقط",
  "وجود أخطاء إملائية فقط"
],
correct: 0,
explanation: "وضوح وترابط الأفكار هما محور ملائمة التعبير."
},

/* 31 */ { q: "رياضيات: في تحليل نتائج اختبار، كيف تحدد أن بندًا ما يميّز بين الطلاب الضعفاء والمتفوقين؟",
choices: [
  "قياس معامل التمييز (item discrimination) ومقارنته بالعتبات المقبولة",
  "فحص طول البند فقط",
  "عد عدد الكلمات في البند",
  "التركيز على ترتيب الأسئلة"
],
correct: 0,
explanation: "معامل التمييز يظهر ما إذا كان البند يفصل بين مستويات الأداء."
},

/* 32 */ { q: "صعوبات تعلم: أي تعديل تعليمي مفيد لطلاب يعانون من ضعف الانتباه؟",
choices: [
  "تقسيم المهمة إلى خطوات قصيرة مع فترات راحة منظمة",
  "زيادة كمية المعلومات المقدمة مرة واحدة",
  "إطالة زمن الحصة فقط",
  "الاعتماد على الأقران فقط"
],
correct: 0,
explanation: "التجزئة وفترات الراحة تحسن التركيز لدى الطلاب مشتتي الانتباه."
},

/* 33 */ { q: "موقف تربوي: طالب يبالغ في الاعتماد على المعلم لحل كل مشكلة، ما استراتيجية لتعزيز الاستقلالية؟",
choices: [
  "تعليم استراتيجيات حل المشكلات وتشجيع التعلم الموجه نحو الذات",
  "حرمانه من المساعدة نهائيًا",
  "الانتظار ليتعلم لوحده",
  "التقليل من الواجبات"
],
correct: 0,
explanation: "تعليم استراتيجيات واضحة يساعد الطالب على الاعتماد على نفسه تدريجياً."
},

/* 34 */ { q: "تخطيط: أي عنصر يجعل خطة الدرس قابلة للتقييم بدقة؟",
choices: [
  "أهداف إجرائية واضحة وقابلة للقياس",
  "نص طويل من دون أهداف",
  "أنشطة مفتوحة بلا معيار",
  "تركيز على الشكل أكثر من المضمون"
],
correct: 0,
explanation: "الأهداف الإجرائية تمكن المعلم من قياس تحققها بوضوح."
},

/* 35 */ { q: "لغة عربية: أي سؤال يختبر مستوى 'المقارنة' بين نصين؟",
choices: [
  "قارن بين وجهتي نظر الكاتبَين فيما يخص ... وما الدليل؟",
  "كم عدد الكلمات في النص الأول؟",
  "اذكر مرادف كلمة معينة",
  "هل النصان طويلان؟"
],
correct: 0,
explanation: "السؤال يطلب مقارنة واستنباط فروق أو شبه بين النصين وهو مناسب للمقارنة."
},

/* 36 */ { q: "رياضيات: طالب يستخدم طريقة حل صحيحة لكنها بطيئة جدًا مقارنة بالزمن المحدد. ما نصيحة المعلم الأمثل؟",
choices: [
  "تعليمه خوارزمية أكثر كفاءة مع الاحتفاظ بالفهم المفهومي",
  "تقليل زمن الاختبارات للجميع",
  "فرض استخدام طريقة أسرع دون شرح",
  "التخلي عن التقييم الزمني"
],
correct: 0,
explanation: "تعلّم خوارزميات أسرع مع فهمها يحسن الكفاءة دون فقدان الفهم."
},

/* 37 */ { q: "موقف تربوي: مجموعة من الطلاب تتدخل عندما يجيب أحدهم، ما إجراء لتقليل التشويش دون كبت التفاعل؟",
choices: [
  "اتفاق قواعد مشاركة محددة واستخدام إشارات دورية للحديث",
  "ممنوع الكلام نهائيًا",
  "العقاب الجماعي عند أول تدخّل",
  "إلغاء الأنشطة التشاركية"
],
correct: 0,
explanation: "قواعد واضحة وإشارات للحديث تسمح بالنقاش دون تشويش."
},

/* 38 */ { q: "تقويم: عند رغبتك في قياس نمو الطالب عبر زمن طويل، ما نوع التقويم الأنسب؟",
choices: [
  "التقويم البنائي المتكرر وملفات الإنجاز",
  "اختبار نهائي مرة واحدة فقط",
  "استبيان بالغة العامة",
  "ملاحظة عابرة فقط"
],
correct: 0,
explanation: "التقويم البنائي وملفات الإنجاز توضح النمو عبر الزمن."
},

/* 39 */ { q: "تكنولوجيا: ما أفضل شكل لأنشطة إلكترونية تعزز التعاون الحقيقي بين الطلاب؟",
choices: [
  "مشروعات تعاونية على منصة تسمح بتحرير مشترك ومراجعات متبادلة",
  "اختبارات فردية عبر الإنترنت",
  "مشاهدات فيديو منفردة",
  "قراءات بلا تبادل"
],
correct: 0,
explanation: "التحرير المشترك والمراجعة المتبادلة يعززان التعاون الفعلي."
},

/* 40 */ { q: "لغة عربية: عند تقييم مهارات الاستنتاج من نص، أي مؤشر يدل على قدرة الطالب؟",
choices: [
  "استدعاء استنتاجات مع دعم من أجزاء النص المختلفة",
  "عدد الكلمات المستخدمة",
  "طول الفقرة الأولى",
  "وجود كلمات صعبة"
],
correct: 0,
explanation: "القدرة على استنتاج مع دلائل من النص تدل على مهارة استنتاجية."
},

/* 41 */ { q: "رياضيات: طالب يخطئ عند الانتقال من التمثيل البياني للمشكلة إلى الصيغة الجبرية. ما التدريب المفيد؟",
choices: [
  "تمارين تربط الخطوة بين الرسم والصيغة تدريجيًا مع توضيح المعاني",
  "حذف التمثيل البياني من التعليم",
  "تركيز على الحفظ دون ربط",
  "تكرار الأسئلة غير المترابطة"
],
correct: 0,
explanation: "الربط التدريجي بين التمثيل والرغمة يساعد على الفهم العميق."
},

/* 42 */ { q: "موقف تربوي: تلاحظ أن بعض الطلاب يجيبون بطريقة ميكانيكية في الامتحان الشفهي لوجود توجيهات مكررة. ما الحل؟",
choices: [
  "تغيير صياغة الأسئلة لتطلب تفكيرًا في العملية وليس فقط النتيجة",
  "تكرار نفس الأسلوب دائمًا لسهولة التصحيح",
  "تسريع عملية الشفهي دون نقاش",
  "تقليل الشفهي نهائيًا"
],
correct: 0,
explanation: "أسئلة تركّز على العملية تجبر الطالب على شرح الخطوات وليس مجرد ذكر النتائج."
},

/* 43 */ { q: "تقويم: ما المعيار الذي يجعل أداء المصححين أكثر ثباتًا؟",
choices: [
  "تدريب المصححين والتوصل إلى اتفاق معياري (calibration) قبل التصحيح",
  "السماح لكل مصحح بالطريقة التي يفضلها",
  "تصحيح عشوائي",
  "الاعتماد على مصحح واحد فقط"
],
correct: 0,
explanation: "التدريب والاتفاق يقللان فروق الحكم بين المصححين."
},

/* 44 */ { q: "صعوبات تعلم: طالب يعاني من ضعف في التواصل الشفهي رغم فهمه الجيد، ما الدعم الأنجع؟",
choices: [
  "تدريبات مهيكلة على التعبير الشفهي مع نماذج وإرشاد",
  "زيادة العمل الكتابي فقط",
  "اعتماده على أقران للتحدث نيابة عنه",
  "تجاهل المشكلة"
],
correct: 0,
explanation: "التدريب المهيكل وممارسة التعبير يطور الثقة والمهارة الشفهية."
},

/* 45 */ { q: "لغة عربية: عند إعداد سؤال يقيس 'الفهم الضمني' ماذا تطلب؟",
choices: [
  "استنباط المعنى غير المصرح به من دلائل النص",
  "معرفة تعريف الكلمات حرفيا",
  "حساب عدد الأسطر",
  "قراءة سريعة فقط"
],
correct: 0,
explanation: "الفهم الضمني يتطلب استخراج معانٍ ليست مذكورة صراحة."
},

/* 46 */ { q: "رياضيات: في اختبار قياس مهارات التفكير، لماذا تجنب وضع بنود لها إجابة واحدة نمطية؟",
choices: [
  "لأنها لاتقيس التفكير العميق ولا تميّز التعلم التركيبي",
  "لأنها أخف في التصحيح",
  "لأن الطلاب يفضلونها",
  "لأن المعلم لا يريد تنويع"
],
correct: 0,
explanation: "البنود التوليدية أو الاستقصائية تطلب تفكيرًا أعمق من نمطية الإجابة."
},

/* 47 */ { q: "موقف تربوي: طلاب متفوقون يشعرون بالملل من أنشطة الصف. أي استراتيجية مناسبة لإشراكهم؟",
choices: [
  "تحديات امتدادية ومهام بحثية تسمح بالتحضير المستقل",
  "زيادة عدد الأسئلة الصفية البسيطة",
  "تقليل المشاركات",
  "استبعادهم من الأنشطة"
],
correct: 0,
explanation: "مهام امتدادية تمنح المتفوقين فرصة للاستكشاف والتعمق."
},

/* 48 */ { q: "تقويم: عند استخدام ملفات الإنجاز كأداة تقويمية، ما الشرط الأساسي لفعاليتها؟",
choices: [
  "تنوع الأدلة ووضوح معايير التقييم المرتبطة بالأهداف",
  "أن تكون ملفاً كبيراً فقط",
  "أن يكون منظماً بصريا فقط",
  "أن يحتوي على أعمال محفوظة فقط"
],
correct: 0,
explanation: "تنوع الأدلة ومعايير واضحة يجعل ملف الإنجاز أداة تقويم صالحة."
},

/* 49 */ { q: "تكنولوجيا: ما المعيار الذي يضمن أمن البيانات في منصات التعلّم؟",
choices: [
  "استخدام بروتوكولات تشفير وتفويض دخول بالإضافة لسياسة خصوصية واضحة",
  "مشاركة معلومات الطلاب علنًا",
  "حفظ كل شيء بدون تشفير",
  "السماح بتسجيل الدخول الجماعي"
],
correct: 0,
explanation: "الأمن يتطلب تشفير وتفويض وسياسات واضحة لحماية خصوصية التلاميذ."
},

/* 50 */ { q: "موقف تربوي: أحد الطلاب ينجح في المهام المنزلية لكنه يفشل في الصف. ما الفرضية التربوية التي تشرح ذلك؟",
choices: [
  "البيئة المنزلية مواتية أكثر لدعم التعلم (هدوء، مساعدة ...)",
  "المعلم في المدرسة غير كفء",
  "الواجبات أسهل من أنشطة الصف دائما",
  "السياسة الصفية تميز ضده"
],
correct: 0,
explanation: "البيئة المنزلية قد توفر موارد ودعم غير متاح في الصف مما يفسر التباين."
},

/* 51 */ { q: "لغة عربية: في تقويم القراءة المتعمقة، ما علامة الأداء التي تدل على فهم نقدي؟",
choices: [
  "قدرة الطالب على نقد موقف الكاتب وربط النص بقراءات أخرى",
  "القدرة على تلاوة النص بسرعة",
  "القدرة على تهجئة كلمات معقدة فقط",
  "قراءة جهرية واضحة"
],
correct: 0,
explanation: "النقد والربط بالنصوص الأخرى مؤشران على قراءة نقدية متقدمة."
},

/* 52 */ { q: "رياضيات: في تصميم بنود اختبار متوازنة، ما الذي يضمن تمايزًا مناسبًا؟",
choices: [
  "مزج بنود تقيس مستويات معرفية مختلفة (تذكر، فهم، تطبيق، تحليل)",
  "وضع كل البنود على نفس المستوى",
  "اهمال بنود التفكير العالي",
  "استخدام نفس الصيغة لكل بند"
],
correct: 0,
explanation: "تنويع المستويات يضمن أن البنود تميّز بين مستويات الطلاب المتعددة."
},

/* 53 */ { q: "صعوبات تعلم: طالب يعاني ضعف تخطيط؛ كيف تقيس تحسنه بعد تدخل تعليمي؟",
choices: [
  "مقارنة أداء الطالب في مهام حل المشكلة قبل وبعد باستخدام قوائم تحقق",
  "مراقبة انفعالاته فقط",
  "زيادة عدد الأسئلة",
  "تغيير المعلم"
],
correct: 0,
explanation: "قوائم التحقق توفر مؤشرًا ملموسًا للتقدم في التخطيط."
},

/* 54 */ { q: "موقف تربوي: طالب يُظهر مقاومة للتعلم عندما لا يشاهد نتائج فورية. ما الاستراتيجية لتعزيز المثابرة؟",
choices: [
  "تقسيم الأهداف إلى مكاسب قصيرة المدى واحتفال التقدم الصغير",
  "إعطاء عقوبات عند عدم الأداء",
  "زيادة حجم الواجبات فورا",
  "تجاهل المقاومة"
],
correct: 0,
explanation: "المكاسب قصيرة المدى تعزز شعور الكفاءة وتدعم الاستمرار."
},

/* 55 */ { q: "لغة عربية: أي تمرين يساعد في رفع قدرة الطلاب على الاستدلال اللغوي؟",
choices: [
  "تحليل النص واستخراج الدلالات والرموز وربطها بسياقها",
  "تكرار حفظ النصوص",
  "الانصات فقط دون نقاش",
  "تمارين إملائية فقط"
],
correct: 0,
explanation: "تحليل الدلالات يطوّر مهارات الاستدلال اللغوي."
},

/* 56 */ { q: "رياضيات: طالب يخطئ غالباً في مسائل النسبة المئوية عند تحويلها لمعدلات. ما النشاط العملي لتصحيح ذلك؟",
choices: [
  "أنشطة تطبيقية ربط النسبة المئوية بسياقات واقعية متعددة",
  "زيادة عدد التمارين النظرية فقط",
  "حذف موضوع النسبة من المنهج",
  "التقييم فقط عبر اختبارات قصيرة"
],
correct: 0,
explanation: "التطبيق في سياقات واقعية يعزز الفهم والتحويل بين تمثيلات."
},

/* 57 */ { q: "تخطيط: كيف تتأكد من أن أهداف الوحدة متسقة مع مخرجات التعلم المدرسية؟",
choices: [
  "مراجعة الأهداف وربط كل هدف بمؤشر قياس واضح ومستمد من الإطار الوطني",
  "كتابة عبارات عامة فقط",
  "تركيز على الأنشطة دون أهداف",
  "تجاهل التوافق مع الإطار"
],
correct: 0,
explanation: "ربط الأهداف بمؤشرات واضحة يضمن التكامل مع الإطار الأعلى."
},

/* 58 */ { q: "صعوبات تعلم: كيف تتعامل مع طالب ذو صعوبات حسابية ومنخفض ثقة؟",
choices: [
  "تقديم دعم تدريجي ومهام ناجحة تعزز الثقة مع تغذية راجعة إيجابية محددة",
  "العقاب عند الخطأ لرفع الحافز",
  "إعطاء مهام فردية صعبة فقط",
  "تجاهل الصعوبات"
],
correct: 0,
explanation: "الدعم التدريجي والمهمات القابلة للتحقيق تبني ثقة ومهارة."
},

/* 59 */ { q: "موقف تربوي: مجموعة طلاب لا تتجاوب مع الأسئلة المفتوحة. ما السبب المحتمل؟",
choices: [
  "غياب زمن الانتظار والتدريب على التفكير العميق",
  "كثرة الواجبات المنزلية فقط",
  "صعوبة فهم اللغة",
  "ضعف تنظيم الصف"
],
correct: 0,
explanation: "زمن الانتظار والتدريب يساعدان على إنتاج إجابات أعمق."
},

/* 60 */ { q: "تقويم: أي أداة تستخدمها لتتبع تقدم مجموعة صغيرة من الطلاب خلال فصل دراسي؟",
choices: [
  "خرائط التقدم الفردية وملفات الإنجاز اليومية",
  "اختبار نهائي عصر الامتحان",
  "تقارير عامة كل سنة",
  "اعتماد الانطباع الشخصي فقط"
],
correct: 0,
explanation: "الخرائط والملفات تعطي بيانات مستمرة وتبين التقدم التفصيلي."
},

/* 61 */ { q: "لغة عربية: كيف تقيس قدرة الطالب على إعادة صياغة فكرة من نص؟",
choices: [
  "تقييم ملخصات مكتوبة باستخدام معايير توضح الدقة والاقتصاد واللغة",
  "اختبارات اختيار من متعدد فقط",
  "تقييم شفهي دون معايير",
  "حفظ نص مشابه"
],
correct: 0,
explanation: "معايير واضحة لملخصات تقيّم إعادة الصياغة بشكل موضوعي."
},

/* 62 */ { q: "رياضيات: عند وجود بند اختبار يظهر تباينًا غير متوقع بين طالبين متقاربين، ما الذي تفحصه أولاً؟",
choices: [
  "الأخطأ في تصحيح أو إدخال الدرجات أو عدم فهم السؤال من قبل أحدهما",
  "ذكاء الطالب",
  "مستوى الصف بأكمله",
  "وجود غش"
],
correct: 0,
explanation: "أخطاء التصحيح أو فهم السؤال قد تفسر الفوارق الفردية."
},

/* 63 */ { q: "تكنولوجيا: ما ميزة استخدام الواجبات المصححة آليًا مع تغذية راجعة مفصلة؟",
choices: [
  "تمكين الطلاب من الحصول على تصحيح فوري وتعليقات تساعدهم على التحسين",
  "تقليل تفاعل المعلم نهائيًا",
  "اعتماد الحلول الجاهزة",
  "إزالة عنصر التقييم البشري"
],
correct: 0,
explanation: "التغذية الراجعة الفورية تساعد الطلاب على التعلم باستمرار وتحسين الأداء."
},

/* 64 */ { q: "موقف تربوي: تزداد شكاوى أولياء الأمور بشأن صعوبة الواجبات. كيف تتصرف؟",
choices: [
  "مراجعة عبء الواجب وربطه بأهداف واضحة وإعطاء توجيهات للمنزل",
  "زيادة الواجبات للتحدي",
  "الرد عليهم بأنهم مخطئون",
  "تجاهل الشكاوى"
],
correct: 0,
explanation: "مراجعة العبء وضمان الوضوح يساعد في حل المشكلة بشكل مهني."
},

/* 65 */ { q: "صعوبات تعلم: كيف تقيس فعالية برنامج تدخل لغوي بعد 8 أسابيع؟",
choices: [
  "مقارنة مؤشرات الأداء (قراءة، فهم، طلاقة) قبل وبعد باستخدام اختبارات معيارية ومهارية",
  "الاعتماد على انطباع المعلم فقط",
  "زيادة المحتوى التعليمي فقط",
  "ملاحظة واحدة فقط"
],
correct: 0,
explanation: "القياس المقارن المعياري والمَهَارِي يعطي دلالة على فعالية البرنامج."
},

/* 66 */ { q: "تخطيط: ماذا يعني جعل النشاط 'قابلًا للقياس'؟",
choices: [
  "وجود مقياس/معيار واضح يسمح بالحكم على مدى تحقيق الهدف",
  "تحديد زمن طويل للعمل",
  "قصر النشاط على فئة معينة فقط",
  "ترك التقييم للتخمين"
],
correct: 0,
explanation: "القابلية للقياس تتطلب معايير أو مؤشرات واضحة."
},

/* 67 */ { q: "لغة عربية: أي سؤال اختياري يكشف عن مهارة التفكير النقدي في نص وخاتمة محتملة؟",
choices: [
  "ناقش نقاط القوة والضعف في موقف الكاتب مع اقتراح بدائل مدعمة بالأدلة",
  "حدد اسم الكاتب",
  "اذكر عدد الفقرات",
  "اختر خيارًا صحيحًا"
],
correct: 0,
explanation: "المهم هو نقد الموقف واقتراح بدائل مع دلائل؛ هذا يقيس التفكير النقدي."
},

/* 68 */ { q: "موقف تربوي عام: كمدير فصل، كيف توازن بين تطبيق قواعد صارمة وبين خلق بيئة محفزة؟",
choices: [
  "تبني قواعد واضحة ومتفق عليها مع تطبيق مكافآت وتشجيعات لتعزيز السلوك الإيجابي",
  "التركيز فقط على العقاب لردع السلوك",
  "عدم وجود قواعد للسماح بالمرونة التامة",
  "إقالة الطلاب المخالفين"
],
correct: 0,
explanation: "التوازن بين قواعد واضحة وتحفيز إيجابي يمنع التجاوز ويشجع السلوك المرغوب."
}
]; // نهاية المصفوفة

/* === ملاحظة مهمة ===
   لضمان تنوع إجابات صحيحة ملخبطة كما طلبت، قمت بتصميم الأسئلة ونظمت الخيار الصحيح بمزيج غير منتظم.
   إذا رغبت تغيير مواقع الصحيحة لتتبع نمط معين (مثلاً: ج، أ، د، ب، ...) أخبرني وسأعدل سريعًا.
*/

/* ===========================
   إنشاء البطاقات والتفاعل
   =========================== */

const quizColumn = document.getElementById('quizColumn');
const total = questions.length;

questions.forEach((Q, idx) => {
  const card = document.createElement('div');
  card.className = 'card';
  card.dataset.answered = ''; // "correct" / "wrong" / ""
  card.dataset.index = idx;

  const head = document.createElement('div');
  head.className = 'q-head';
  head.innerHTML = `<div class="q-num">س ${idx+1}</div><div style="font-weight:700;color:var(--muted)">سؤال ${idx+1}</div>`;
  card.appendChild(head);

  const sent = document.createElement('div');
  sent.className = 'sentence';
  sent.innerHTML = Q.q;
  card.appendChild(sent);

  const choicesDiv = document.createElement('div');
  choicesDiv.className = 'choices';

  Q.choices.forEach((c, i) => {
    const btn = document.createElement('button');
    btn.className = 'choice';
    // label Arabic letter
    const labels = ['أ','ب','ج','د'];
    btn.innerHTML = `<div style="font-weight:800;display:inline-block;margin-left:8px">${labels[i]}</div> <div style="display:inline-block;vertical-align:top">${c}</div>`;
    btn.addEventListener('click', () => {
      if (btn.classList.contains('disabled')) return;
      // تعطيل باقي الأزرار
      Array.from(choicesDiv.children).forEach(x => x.classList.add('disabled'));
      // تحقق
      if (i === Q.correct) {
        btn.classList.add('correct');
        card.dataset.answered = 'correct';
        showPopInline(card, `<strong style="color:${getComputedStyle(document.documentElement).getPropertyValue('--success') || '#16a34a'}">إجابة صحيحة ✔</strong><div style="margin-top:6px">${Q.explanation}</div>`);
      } else {
        btn.classList.add('wrong');
        // إبراز الصحيح
        if (choicesDiv.children[Q.correct]) choicesDiv.children[Q.correct].classList.add('correct');
        card.dataset.answered = 'wrong';
        showPopInline(card, `<strong style="color:${getComputedStyle(document.documentElement).getPropertyValue('--danger') || '#ef4444'}">إجابة خاطئة ✘</strong><div style="margin-top:6px">${Q.explanation}</div>`);
      }
      updateSummary();
    });
    choicesDiv.appendChild(btn);
  });

  card.appendChild(choicesDiv);
  quizColumn.appendChild(card);
});

/* ===========================
   Popup داخل البطاقة (inline)
   =========================== */
function showPopInline(card, html) {
  const old = card.querySelector('.pop');
  if (old) old.remove();
  const p = document.createElement('div');
  p.className = 'pop';
  p.innerHTML = html;
  card.appendChild(p);
  // scroll to pop a bit
  card.scrollIntoView({behavior:'smooth', block:'center'});
}

/* ===========================
   ملخّص / شريط تقدم
   =========================== */
const statCorrect = document.getElementById('statCorrect');
const statAnswered = document.getElementById('statAnswered');
const statPercent = document.getElementById('statPercent');
const summaryCount = document.getElementById('summaryCount');
const progressBar = document.getElementById('progressBar');

function updateSummary() {
  let correct = 0;
  let answered = 0;
  document.querySelectorAll('.card').forEach(c => {
    if (c.dataset.answered === 'correct') correct++;
    if (c.dataset.answered === 'correct' || c.dataset.answered === 'wrong') answered++;
  });
  statCorrect.textContent = correct;
  statAnswered.textContent = `${answered} / ${total}`;
  const percent = Math.round((correct / total) * 100);
  statPercent.textContent = `${percent}%`;
  summaryCount.textContent = `${correct}`;
  progressBar.style.width = `${Math.round((answered/total)*100)}%`;
  document.getElementById('finalScore').textContent = `${correct} / ${total}`;
}

/* ===========================
   أزرار: عرض النتيجة - إعادة الاختبار
   =========================== */
document.getElementById('showAll').addEventListener('click', () => {
  updateSummary();
  const correct = Number(statCorrect.textContent);
  const panelBreak = document.getElementById('finalBreak');
  const overlay = document.getElementById('overlay');
  const totalQ = total;
  if (correct === totalQ) panelBreak.innerText = 'ممتاز — إجابات جميعها صحيحة!';
  else if (correct >= Math.ceil(totalQ * 0.85)) panelBreak.innerText = 'ممتاز جداً — مستوى متقدم!';
  else if (correct >= Math.ceil(totalQ * 0.7)) panelBreak.innerText = 'جيد جدًا — أداء قوي';
  else if (correct >= Math.ceil(totalQ * 0.5)) panelBreak.innerText = 'متوسط — يحتاج مراجعة مركزة';
  else panelBreak.innerText = 'ضعيف — أنصح بمراجعة الأساسيات والتدريب المكثف';
  overlay.style.display = 'flex';
});

document.getElementById('closeOverlay').addEventListener('click', () => {
  document.getElementById('overlay').style.display = 'none';
});

document.getElementById('resetBtn').addEventListener('click', resetExam);

function resetExam() {
  // إزالة النوافذ المنبثقة داخل البطاقات
  document.querySelectorAll('.card .pop').forEach(p => p.remove());
  document.querySelectorAll('.card').forEach(card => {
    card.dataset.answered = '';
    card.querySelectorAll('.choice').forEach(btn => {
      btn.classList.remove('disabled','correct','wrong');
    });
  });
  updateSummary();
  // scroll top
  window.scrollTo({top:0, behavior:'smooth'});
}

/* تهيئة */
updateSummary();

</script>
</body>
</html>
